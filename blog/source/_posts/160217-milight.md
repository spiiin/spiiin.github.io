---
title: Milight
tags:
  - hardware
  - python
  - codespell
abbrlink: 980631231
date: 2016-02-17 22:49:00
---
Лампочки для дистанционного управления через интернет через WiFi — неотъемлемый компонент умного дома в моём понимании.

Если компьютер в состоянии принести пиво из холодильника, приготовить чай, изменить температуру с минимальными усилиями, то твой достаточно дом умён.

Пока что есть хотя бы лампочки. В отличие от от [Philips Hue](http://www2.meethue.com/en-us/products/), которые стоят не-Hue-во, комплект из 4-х RGBW Milight-лампочек, пульта управления и Wi-Fi приёмника можно приобрести за 50-60$.

Есть белые лампочки, в которых изменяется только яркость освещения, но мне, как фанату цветного освещения, больше понравились лампы с заявленными 24 миллионами цветов, некоторые из которых ещё и флюрные.

На лампочках есть несколько простых программ смены цветов, в стиле новогодних гирлянд, но возможно программировать их и самому.

Минус — закрытый протокол лампочек, в отличие от филипсовских, у которых торчит API для программиста.

Но народные умельцы [разобрали](https://hackaday.io/project/5888-reverse-engineering-the-milight-on-air-protocol) его, и можно хоть написать свою библиотеку, хоть воспользоваться одной из нескольких уже готовых, например, [этой](https://github.com/McSwindler/python-milight).

Код, как обычно на Python, выглядит просто:

```python
import milight
#соединяемся с WiFi-контроллером лампочек
controller = milight.MiLight({'host': '10.10.100.254', 'port': 8899}, wait_duration=0)
#включаем первую лампочку
controller.send(light.on(1))
#меняем цвет 1-й включенной лампочки на красный
controller.send(light.color(milight.color_from_rgb(0xff, 0x00, 0x00), 1))
```

Если же не хочется писать свой код, можно воспользоваться какой-нибудь готовой программой, лучшая из опробованных — [Milight Controller](http://epocapp.bitbucket.org/milight/), которая умеет подстраивать цвет лампочек под цвет картинки на экране либо под звук с колонок по нескольким алгоритмам.

Получается что-то вроде такого:
https://www.youtube.com/watch?v=6pSpwF6W0Kg

Первые пробы на Мортал Комбате показали, что иногда лампы живут собственной жизнью, но в основном подсвечивают фон и яркие выстрелы бойцов. Но главный их эффект в этой игре — они на порядок усиливают эффект добиваний, теперь при успешном фаталити не только экран, но и вся комната окрашивается в зловещий красный цвет.