<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Spiiin's blog | Уровни Jungle Book [NES]. Часть 2</title><meta name="description" content=""><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=PT+Serif&amp;display=swap"><link rel="stylesheet" href="/css/highlights/darkula.css"><link rel="stylesheet" href="/css/main.css"><link rel="search" type="application/opensearchdescription+xml" href="http://spiiin.github.io/atom.xml" title="Spiiin's blog"><script>(function (i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r;
  i[r] = i[r] || function () {
    (i[r].q = i[r].q || []).push(arguments)
  }, i[r].l = 1 * new Date();
  a = s.createElement(o),
    m = s.getElementsByTagName(o)[0];
  a.async = 1;
  a.src = g;
  m.parentNode.insertBefore(a, m)
})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-00000000-0', 'auto');
ga('send', 'pageview');</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Spiiin's blog" type="application/atom+xml">
</head><body><div class="container"><header class="main-header"><h1 class="main-header__title uplize"><a class="main-header__title__link" href="/"><img class="header-image" src="/images/favicon.png" width="36" height="36">Spiiin's blog</a></h1><nav class="main-header__nav"><ul class="main-nav"><li class="main-nav__list"><a class="main-nav__list__link" href="/" target="_self">HOME</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/archives/" target="_self">ARCHIVE</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/tags/meta" target="_self">TAGS</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/blog/1" target="_self">ABOUT</a></li></ul></nav></header><main class="container__wrapper"><div class="pagination"><a class="pagination__link pagination__prev" href="/blog/4383/">Позже</a><a class="pagination__link pagination__next" href="/blog/41044/">Раньше</a></div><article class="article post"><h3 class="article__title">Уровни Jungle Book [NES]. Часть 2</h3><div class="article__date metadata"><div class="post-info">2011/10/20</div></div><div class="article__tags metadata">Tags:
<a class="article__tags__link metadata" href="/tags/nes/">nes</a><a class="article__tags__link metadata" href="/tags/hack/">hack</a></div><div class="article__body"><link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><strong>Шаг 0x0A.</strong> </p>
<p>Остается последний шаг, чтобы связать результаты анализа снизу (от экрана к набору) и сверху (от набора к экрану) - понять, как адреса из предэкрана + смещение попадают в экран . Так как для этого копирования используется адресация через нулевую страницу, точку остановки поставить нельзя, поэтому можно только поставить ее на запись в экран и просто искать в окрестностях чтение из предэкрана .</p>
<figure class="shiki asm"><div class="codeblock"><div class="code"><pre class="shiki dracula"><code><span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">840F JSR sub_856B </span><span style="color: #6272A4">; Копирование 4х адресов в зону предэкран-вторичные индексы</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">840F </span><span style="color: #6272A4">; х циклически проходит диапазон (00-03)</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8412</span><span style="color: #F8F8F2"> LDA byte_A5</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8414</span><span style="color: #F8F8F2"> EOR #</span><span style="color: #BD93F9">3</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8416</span><span style="color: #F8F8F2"> TAX</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8417</span><span style="color: #F8F8F2"> LSR A</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8418</span><span style="color: #F8F8F2"> STA byte_A9</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">841A</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">841A LDY #</span><span style="color: #BD93F9">0</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">841C LDA ($A3),Y </span><span style="color: #6272A4">; индекс относительно базового адреса из предэкрана</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">841E TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">841F PHA</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8420</span><span style="color: #F8F8F2"> BMI loc_8427</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8422</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$83</span><span style="color: #F8F8F2">),Y </span><span style="color: #6272A4">; отсюда мы считываем индекс начала цепочки</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8424</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">JMP</span><span style="color: #F8F8F2"> loc_8429</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8427</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4">; ---------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8427</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8427</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$85</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8429</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8429</span><span style="color: #F8F8F2"> TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">842A </span><span style="color: #BD93F9">BPL</span><span style="color: #F8F8F2"> loc_843B</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">842C LDA (</span><span style="color: #BD93F9">$95</span><span style="color: #F8F8F2">),Y </span><span style="color: #6272A4">; используем считанный индекс, чтобы взять тайл из набора</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">842E STA </span><span style="color: #BD93F9">$40B</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8431</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$99</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8433</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40C</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8436</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$71</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8438</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">JMP</span><span style="color: #F8F8F2"> loc_8447</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">843B </span><span style="color: #6272A4">; ---------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">843B</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">843B LDA (</span><span style="color: #BD93F9">$93</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">843D</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40B</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8440</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$97</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8442</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40C</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8445</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$6F</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8447</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8447</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">AND</span><span style="color: #F8F8F2"> #</span><span style="color: #BD93F9">3</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8449</span><span style="color: #F8F8F2"> TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">844A LDA </span><span style="color: #BD93F9">$8B16</span><span style="color: #F8F8F2">,Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">844D</span><span style="color: #F8F8F2"> LDY byte_A9</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">844F STA </span><span style="color: #BD93F9">$455</span><span style="color: #F8F8F2">,Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8452</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">INC</span><span style="color: #F8F8F2"> byte_A9</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8454</span><span style="color: #F8F8F2"> PLA</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8455</span><span style="color: #F8F8F2"> TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8456</span><span style="color: #F8F8F2"> BMI loc_845D</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8458</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$87</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">845A </span><span style="color: #FF79C6">JMP</span><span style="color: #F8F8F2"> loc_845F</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">845D</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4">; ---------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">845D</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">845D</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$89</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">845F</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">845F TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8460</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">BPL</span><span style="color: #F8F8F2"> loc_8471 </span><span style="color: #6272A4">; что-то типа записи в столбик, из которого будет перенос в видеопамять</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8462</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$95</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8464</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40D</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8467</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$99</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8469</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40E</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">846C LDA (</span><span style="color: #BD93F9">$71</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">846E </span><span style="color: #FF79C6">JMP</span><span style="color: #F8F8F2"> loc_847D</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8471</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4">; ---------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8471</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8471</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$93</span><span style="color: #F8F8F2">),Y </span><span style="color: #6272A4">; что-то типа записи в столбик, из которого будет перенос в видеопамять</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8473</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40D</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8476</span><span style="color: #F8F8F2"> LDA (</span><span style="color: #BD93F9">$97</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8478</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$40E</span><span style="color: #F8F8F2">,X</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">847B LDA (</span><span style="color: #BD93F9">$6F</span><span style="color: #F8F8F2">),Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">847D</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">847D</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">AND</span><span style="color: #F8F8F2"> #</span><span style="color: #BD93F9">3</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">847F TAY</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8480</span><span style="color: #F8F8F2"> LDA </span><span style="color: #BD93F9">$8B16</span><span style="color: #F8F8F2">,Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8483</span><span style="color: #F8F8F2"> LDY byte_A9</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8485</span><span style="color: #F8F8F2"> STA </span><span style="color: #BD93F9">$455</span><span style="color: #F8F8F2">,Y</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8488</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">INC</span><span style="color: #F8F8F2"> byte_A9</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">848A INX</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">848B INX</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">848C INX</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">848D</span><span style="color: #F8F8F2"> INX</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">848E </span><span style="color: #FF79C6">DEC</span><span style="color: #F8F8F2"> byte_3F0 </span><span style="color: #6272A4">; кол-во повторов считывания</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8491</span><span style="color: #F8F8F2"> BMI loc_84BE </span><span style="color: #6272A4">; выход из копирования столбца</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8493</span><span style="color: #F8F8F2"> LDA xcoord </span><span style="color: #6272A4">; x-координата столбца</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8496</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">INC</span><span style="color: #F8F8F2"> xcoord</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">8499</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">CMP</span><span style="color: #F8F8F2"> #</span><span style="color: #BD93F9">2</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">849B BCS loc_84A1</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #BD93F9">849D</span><span style="color: #F8F8F2"> LDA #</span><span style="color: #BD93F9">0</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">849F BEQ loc_84B0</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84A1</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84A1 BIT byte_12</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84A3 </span><span style="color: #BD93F9">BPL</span><span style="color: #F8F8F2"> loc_84AD</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84A5 LDA xcoord</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84A8 </span><span style="color: #FF79C6">CMP</span><span style="color: #F8F8F2"> byte_36F</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84AB BCS loc_84C1</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84AD</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84AD LDA xshift_cycle60</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B0</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B0 </span><span style="color: #FF79C6">CLC</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B1 </span><span style="color: #FF79C6">ADC</span><span style="color: #F8F8F2"> byte_A3</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B3 STA byte_A3</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B5 LDA byte_A4</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B7 </span><span style="color: #FF79C6">ADC</span><span style="color: #F8F8F2"> #</span><span style="color: #BD93F9">0</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84B9 STA byte_A4</span></span>
<span class="line"><span style="color: #50FA7B">ROM:</span><span style="color: #F8F8F2">84BB </span><span style="color: #FF79C6">JMP</span><span style="color: #F8F8F2"> loc_841A </span><span style="color: #6272A4">; повтор загрузки</span></span></code></pre></div></div></figure>
<p>Этот кусок кода и есть функция- комбинатор . Она показывает связь между предэкраном и экраном . Новые важные переменные здесь <code>$366 (x_shift_cycle)</code> - насколько сдвигаться за один шаг цикла считывания, похоже на разницу между строками, то есть ширину всего уровня;<br><code>xcoord</code> - число повторов выборки, постоянно равно 5, от есть считывается по 4 тайла 5 раз = 20 раз - один столбец на экране. <code>$A2-$A3</code> - пара ячеек, в которых написан изначальный индекс, от которого проводится измерение. </p>
<p>Разбираться откуда он берется пока не обязательно, можно посмотреть первый попавшийся и начать написание функции-комбинатора, которая будет делать то же самое, что и приведенный выше кусок кода на ассемблере.</p>
<p><strong>Шаг 0x0B.</strong></p>
<p>Реализация комбинатора на питоне:<br><figure class="shiki python"><div class="codeblock"><div class="code"><pre class="shiki dracula"><code><span class="line"><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">def</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">get4Lines</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">begin</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">end</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">levelSet</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">a3a4</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">step</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">vertCount</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">  cycleBegin </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> begin</span></span>
<span class="line"><span style="color: #F8F8F2">  cycleEnd   </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> end</span></span>
<span class="line"><span style="color: #F8F8F2">  a3a4ind </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> begin</span><span style="color: #FF79C6">/</span><span style="color: #BD93F9">4</span></span>
<span class="line"><span style="color: #F8F8F2">  line4 </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> []</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">for</span><span style="color: #F8F8F2"> x </span><span style="color: #FF79C6">in</span><span style="color: #F8F8F2"> xrange(cycleBegin,cycleEnd):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> x</span><span style="color: #FF79C6">%</span><span style="color: #BD93F9">4</span><span style="color: #FF79C6">==</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      a3a4ind </span><span style="color: #FF79C6">+=</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">1</span></span>
<span class="line"><span style="color: #F8F8F2">    b83,b85,b87,b89 </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> getLevelSetForCycle(levelSet, b8x_inds,(x</span><span style="color: #FF79C6">+</span><span style="color: #BD93F9">2</span><span style="color: #F8F8F2">)</span><span style="color: #FF79C6">%</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    b93,b95,b97,b99 </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> getLevelSetForCycle(levelSet, b9x_inds,(x</span><span style="color: #FF79C6">+</span><span style="color: #BD93F9">2</span><span style="color: #F8F8F2">)</span><span style="color: #FF79C6">%</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    line4.extend(makeLine(a3a4, a3a4ind, b83,b85,b87,b89, b93,b95,b97,b99, step, vertCount))</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> line4</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #FF79C6">def</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">makeLine</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">a3a4</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">a3a4BaseInd</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">b83</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b85</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b87</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b89</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">b93</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b95</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b97</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">b99</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">step</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">vertCount</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">  a3a4ind </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> a3a4BaseInd</span></span>
<span class="line"><span style="color: #F8F8F2">  lines </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> []</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">for</span><span style="color: #F8F8F2"> globalRepeat </span><span style="color: #FF79C6">in</span><span style="color: #F8F8F2"> xrange(vertCount): </span><span style="color: #6272A4">##5(screen size)</span></span>
<span class="line"><span style="color: #F8F8F2">    predInd </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> a3a4[a3a4ind]</span></span>
<span class="line"><span style="color: #F8F8F2">    ind2a,ind2b </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">-</span><span style="color: #BD93F9">1</span><span style="color: #F8F8F2">,</span><span style="color: #FF79C6">-</span><span style="color: #BD93F9">1</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> predInd</span><span style="color: #FF79C6">&lt;</span><span style="color: #BD93F9">128</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      ind2a </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b83[predInd]</span></span>
<span class="line"><span style="color: #F8F8F2">      ind2b </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b87[predInd]</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">else</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      ind2a </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b85[predInd]</span></span>
<span class="line"><span style="color: #F8F8F2">      ind2b </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b89[predInd]</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">    res </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> [</span><span style="color: #FF79C6">-</span><span style="color: #BD93F9">1</span><span style="color: #F8F8F2">]</span><span style="color: #FF79C6">*</span><span style="color: #BD93F9">4</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> ind2a</span><span style="color: #FF79C6">&lt;</span><span style="color: #BD93F9">128</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      res[</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">],res[</span><span style="color: #BD93F9">1</span><span style="color: #F8F8F2">] </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b93[ind2a], b97[ind2a]</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">else</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      res[</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">],res[</span><span style="color: #BD93F9">1</span><span style="color: #F8F8F2">] </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b95[ind2a], b99[ind2a]</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> ind2b</span><span style="color: #FF79C6">&lt;</span><span style="color: #BD93F9">128</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      res[</span><span style="color: #BD93F9">2</span><span style="color: #F8F8F2">],res[</span><span style="color: #BD93F9">3</span><span style="color: #F8F8F2">] </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b93[ind2b], b97[ind2b]</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FF79C6">else</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      res[</span><span style="color: #BD93F9">2</span><span style="color: #F8F8F2">],res[</span><span style="color: #BD93F9">3</span><span style="color: #F8F8F2">] </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> b95[ind2b], b99[ind2b]</span></span>
<span class="line"><span style="color: #F8F8F2">    lines.extend(res)</span></span>
<span class="line"><span style="color: #F8F8F2">    a3a4ind</span><span style="color: #FF79C6">+=</span><span style="color: #F8F8F2">step</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> lines</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">b8x_inds </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> [[</span><span style="color: #BD93F9">5</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">5</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">7</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">7</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">6</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">6</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">9</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">9</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">11</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">11</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">10</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">10</span><span style="color: #F8F8F2">]]</span></span>
<span class="line"><span style="color: #F8F8F2">b9x_inds </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> [[</span><span style="color: #BD93F9">12</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">13</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">12</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">13</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">14</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">15</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">14</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">15</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">16</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">17</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">16</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">17</span><span style="color: #F8F8F2">], [</span><span style="color: #BD93F9">18</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">19</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">18</span><span style="color: #F8F8F2">,</span><span style="color: #BD93F9">19</span><span style="color: #F8F8F2">]]</span></span>
<span class="line"><span style="color: #FF79C6">def</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">getLevelSetForCycle</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">levelSet</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">indsConst</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">loop</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">  inds </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #8BE9FD">map</span><span style="color: #F8F8F2"> (</span><span style="color: #FF79C6">lambda</span><span style="color: #F8F8F2"> </span><span style="color: #FFB86C; font-style: italic">v</span><span style="color: #F8F8F2">: v[loop], indsConst)</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> </span><span style="color: #8BE9FD">map</span><span style="color: #F8F8F2"> (</span><span style="color: #FF79C6">lambda</span><span style="color: #F8F8F2"> </span><span style="color: #FFB86C; font-style: italic">i</span><span style="color: #F8F8F2">: levelSet[i], inds)</span></span></code></pre></div></div></figure></p>
<p>Набор данных можно выхватить прямо из дампа памяти: </p>
<figure class="shiki python"><div class="codeblock"><div class="code"><pre class="shiki dracula"><code><span class="line"><span style="color: #FF79C6">def</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">prepareBinary</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">binaryDump</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">addrBegin</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">addrLen</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">outName</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">f </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #8BE9FD">open</span><span style="color: #F8F8F2">(binaryDump,</span><span style="color: #E9F284">&quot;</span><span style="color: #F1FA8C">rb</span><span style="color: #E9F284">&quot;</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">byt </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> f.read()</span></span>
<span class="line"><span style="color: #F8F8F2">f.close()</span></span>
<span class="line"><span style="color: #F8F8F2">bb </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> byt[addrBegin</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2">addrBegin</span><span style="color: #FF79C6">+</span><span style="color: #F8F8F2">addrLen]</span></span>
<span class="line"><span style="color: #F8F8F2">f </span><span style="color: #FF79C6">=</span><span style="color: #8BE9FD">open</span><span style="color: #F8F8F2">(outName,</span><span style="color: #E9F284">&quot;</span><span style="color: #F1FA8C">wb</span><span style="color: #E9F284">&quot;</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">f.write(bb)</span></span>
<span class="line"><span style="color: #F8F8F2">f.close()</span></span></code></pre></div></div></figure>
<p>Дальше можно проверить отрисовку и убедиться, нарисовалась полоса уровня высотой в 20 клеток.</p>
<p><strong>Шаг 0x0C.</strong></p>
<p>Экспериментируя с параметрами <code>A2A3</code> и значением <code>vertCount</code> можно получать разные срезы уровня, например, такой:<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/0001xwst/"><img src="http://pics.livejournal.com/spiiin/pic/0001xwst" alt></a></p>
<p>По нему можно прикинуть, откуда начинается мусор, и как конец уровня связан с началом по высоте и вычислить правильное значение <code>A2A3</code> соответствуюшее началу уровня (и в итоге заметить, что оно на 1 меньше, чем адрес в <code>$47-$48</code> (это первое значение из набора ), то есть равно первому значению и набора - 1).</p>
<p>Также можно обратить внимание, что рядом с шириной уровня ($366) в ячейке $367 лежит и его ширина).</p>
<p>Тогда можно вывести полную схему работы комбинатора:<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/0001y71x/"><img src="http://pics.livejournal.com/spiiin/pic/0001y71x/s640x480" alt></a></p>
<p>и написать универсальную функцию рисования:</p>
<figure class="shiki python"><div class="codeblock"><div class="code"><pre class="shiki dracula"><code><span class="line"><span style="color: #FF79C6">def</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">makeJob</span><span style="color: #F8F8F2"> (</span><span style="color: #FFB86C; font-style: italic">binaryName</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">spritesName</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">addr</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">baseAddrSet</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">w</span><span style="color: #F8F8F2">,</span><span style="color: #FFB86C; font-style: italic">h</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">levelNo</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">  tempName1 </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> binaryName</span><span style="color: #FF79C6">+</span><span style="color: #E9F284">&quot;</span><span style="color: #F1FA8C">.a2a3.</span><span style="color: #E9F284">&quot;</span><span style="color: #FF79C6">+</span><span style="color: #8BE9FD; font-style: italic">str</span><span style="color: #F8F8F2">(levelNo)</span><span style="color: #FF79C6">+</span><span style="color: #E9F284">&quot;</span><span style="color: #F1FA8C">.bin</span><span style="color: #E9F284">&quot;</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">  imNameTable </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> Image.open(spritesName)</span></span>
<span class="line"><span style="color: #F8F8F2">  nameSize </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> imNameTable.size</span></span>
<span class="line"><span style="color: #F8F8F2">  nameTable </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> [imNameTable.crop((x,y,x</span><span style="color: #FF79C6">+</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">,y</span><span style="color: #FF79C6">+</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">)) </span><span style="color: #FF79C6">for</span><span style="color: #F8F8F2"> y,x </span><span style="color: #FF79C6">in</span><span style="color: #F8F8F2"> itertools.product(xrange(</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">,nameSize[</span><span style="color: #BD93F9">1</span><span style="color: #F8F8F2">],</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">),xrange(</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">,nameSize[</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">],</span><span style="color: #BD93F9">8</span><span style="color: #F8F8F2">))]</span></span>
<span class="line"><span style="color: #F8F8F2">  sprites </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #8BE9FD">map</span><span style="color: #F8F8F2"> (</span><span style="color: #FF79C6">lambda</span><span style="color: #F8F8F2"> </span><span style="color: #FFB86C; font-style: italic">im</span><span style="color: #F8F8F2">: PpuSprite(im),nameTable) </span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">  prepareBinary(binaryName, addr, </span><span style="color: #FF79C6">0x</span><span style="color: #BD93F9">2000</span><span style="color: #F8F8F2">, tempName1)</span></span>
<span class="line"><span style="color: #F8F8F2">  a3a4 </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> parseBinData256(tempName1)</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">  prepareBinaries(binaryName, baseAddrSet)</span></span>
<span class="line"><span style="color: #F8F8F2">  levelSet </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #8BE9FD">map</span><span style="color: #F8F8F2">(loadLevelSetElement, baseAddrSet)</span></span>
<span class="line"><span style="color: #F8F8F2">  ll </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> get4Lines(</span><span style="color: #BD93F9">0</span><span style="color: #F8F8F2">,w</span><span style="color: #FF79C6">*</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">, levelSet, a3a4, w,h)</span></span>
<span class="line"><span style="color: #F8F8F2">  drawLevelFromData(ll, sprites,(w</span><span style="color: #FF79C6">*</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">,h</span><span style="color: #FF79C6">*</span><span style="color: #BD93F9">4</span><span style="color: #F8F8F2">),</span><span style="color: #BD93F9">True</span><span style="color: #F8F8F2">).show()</span></span></code></pre></div></div></figure>
<p>(уровень определяется - дампом памяти, набором адресов, размерами (ширина и высота) и картой тайлов).</p>
<p>Этой функцией можно нарисовать любой уровень:<br>Уровень 1.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/0001zdhq/"><img src="http://pics.livejournal.com/spiiin/pic/0001zdhq/s640x480" alt="1"></a><br>Уровень 2.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00020r8e/"><img src="http://pics.livejournal.com/spiiin/pic/00020r8e/s640x480" alt="2"></a><br>Уровень 3.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/0002115d/"><img src="http://pics.livejournal.com/spiiin/pic/0002115d/s640x480" alt="3"></a><br>Уровень 4.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/000228yk/"><img src="http://pics.livejournal.com/spiiin/pic/000228yk/s640x480" alt="4"></a><br>Уровень 5.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00023f84/"><img src="http://pics.livejournal.com/spiiin/pic/00023f84/s640x480" alt="5"></a><br>Уровень 6.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00024g9r/"><img src="http://pics.livejournal.com/spiiin/pic/00024g9r/s640x480" alt="6"></a><br>Уровень 7.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00025e0b/"><img src="http://pics.livejournal.com/spiiin/pic/00025e0b/s640x480" alt="7"></a><br>Уровень 8.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00026hc9/"><img src="http://pics.livejournal.com/spiiin/pic/00026hc9/s640x480" alt="8"></a><br>Уровень 9.<br><a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/000277fy/"><img src="http://pics.livejournal.com/spiiin/pic/000277fy/s640x480" alt="9"></a><br>Уровень 10. <a target="_blank" rel="noopener" href="http://pics.livejournal.com/spiiin/pic/00028s1z/"><img src="http://pics.livejournal.com/spiiin/pic/00028s1z/s640x480" alt="10"></a><br><a target="_blank" rel="noopener" href="http://pastebin.com/e4qedf4X">Код скрипта</a> (использовался больше в интерактивном режиме)</p>
<p> <em>//Если что-то долго ломать, то оно сломается.</em></p>
<p> <strong>Конец</strong></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"Ov23liG1mZbiQOIdi91X","clientSecret":"e05812685eb741a752982b89dcf6f5b58dc10251","repo":"spiiin.github.io","owner":"spiiin","admin":["spiiin"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></div></article><div class="pagination"><a class="pagination__link pagination__prev" href="/blog/4383/">Позже</a><a class="pagination__link pagination__next" href="/blog/41044/">Раньше</a></div></main><footer class="footer metadata"><p class="footer__text">© 2024 spiiin</p><p class="footer__text">Powered by <a class="footer__text__link" href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a class="footer__text__link" href="https://pages.github.com/" target="_blank">Github Page</a></p></footer></div><!-- hexo injector body_end start -->
  <script>
  const CODE_CONFIG = {
    beautify: undefined,
    highlightCopy: undefined,
    highlightLang: undefined,
    highlightHeightLimit: undefined,
    isHighlightShrink: undefined,
    copy: {
      success: 'undefined',
      error: 'undefined',
      noSupport: 'undefined',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body></html>